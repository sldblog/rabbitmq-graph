#!/usr/bin/env ruby
# frozen_string_literal: true

require 'bundler/setup'
$LOAD_PATH.unshift(Bundler.root) unless $LOAD_PATH.include?(Bundler.root)

require 'app/discover'
require 'app/dot_format'

show_entities = ENV.fetch('SHOW_ENTITIES', 'true') == 'true'
label_detail = ENV.fetch('LABEL_DETAIL', 'actions').to_s.split(',').map(&:strip).reject(&:empty?).map(&:to_sym)
puts DotFormat.new(topology: topology, show_entities: show_entities, label_detail: label_detail).present
